port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
tproxy-port: 7894
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
ipv6: true

external-controller: '127.0.0.1:9090'

dns:
  enable: true
  listen: 0.0.0.0:1053 
  ipv6: true 
  enhanced-mode: fake-ip 
  fake-ip-range: 198.18.0.1/16 
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - '*.lan'
    - '*.local'
    - localhost.ptlogin2.qq.com
    - +.stun.*.*
    - +.stun.*.*.*
    - +.stun.*.*.*.*
    - +.stun.*.*.*.*.*
    - "RULE-SET,private_domain"
    - "RULE-SET,cn_domain"

  default-nameserver:
    - 223.5.5.5 # AliDNS
    - 119.29.29.29 # DNSPod
    - https://doh.pub/dns-query 
  proxy-server-nameserver:
    - https://dns.google/dns-query
    - https://cloudflare-dns.com/dns-query
  fallback:
    - tls://1.0.0.1:853
    - tls://dns.google:853
  respect-rules: false
  use-hosts: true

sniffer:
  enable: true
  sniff:
    - TLS
    - HTTP
    - QUIC
  force-domain:
    - '+.v2ex.com'
  skip-domain:
    - 'Mijia Cloud'
    - '+.baidu.com'

tun:
  enable: true
  stack: system 
  auto-route: true
  auto-detect-interface: true
  dns-hijack:
    - 'any:53'

proxy-providers:
  Airport:
    type: http
    url: {{{sub_link}}}
    interval: 86400 
    path:./proxies/airport.yaml
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300 
      proxy: DIRECT

rule-providers:
  ad_domain:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/ad-domain.txt"
    path:./ruleset/ad_domain.txt
    interval: 86400
  private_domain:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/private-domain.txt"
    path:./ruleset/private_domain.txt
    interval: 86400
  cn_domain:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/cn-domain.txt"
    path:./ruleset/cn_domain.txt
    interval: 86400
  cn_ip:
    type: http
    behavior: ipcidr
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/cn-ip.txt"
    path:./ruleset/cn_ip.txt
    interval: 86400
  geolocation-!cn:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geolocation-!cn-domain.txt"
    path:./ruleset/geolocation-!cn.txt
    interval: 86400
  netflix_domain:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/netflix-domain.txt"
    path:./ruleset/netflix_domain.txt
    interval: 86400
  youtube_domain:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/youtube-domain.txt"
    path:./ruleset/youtube_domain.txt
    interval: 86400
  google_domain:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/google-domain.txt"
    path:./ruleset/google_domain.txt
    interval: 86400
  telegram_domain:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/telegram-domain.txt"
    path:./ruleset/telegram_domain.txt
    interval: 86400
  ai:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/ai-domain.txt"
    path:./ruleset/ai.txt
    interval: 86400

proxy-groups:
  - name: 'ğŸš€ é»˜è®¤ä»£ç†'
    type: select
    proxies:
      - 'â™»ï¸ è‡ªåŠ¨'
      - 'ğŸ”¯ æ•…éšœè½¬ç§»'
      - 'ğŸ‡°ğŸ‡· éŸ©å›½'
      - 'ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡'
      - 'ğŸ‡ºğŸ‡¸ ç¾å›½'
      - 'ğŸŒ å…¨éƒ¨èŠ‚ç‚¹'
      - 'ğŸ¯ ç›´è¿'

  - name: 'ğŸ¥ NETFLIX'
    type: select
    proxies:
      - 'â™»ï¸ è‡ªåŠ¨'
      - 'ğŸ”¯ æ•…éšœè½¬ç§»'
      - 'ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡'
      - 'ğŸ‡ºğŸ‡¸ ç¾å›½'
      - 'ğŸŒ å…¨éƒ¨èŠ‚ç‚¹'
  - name: 'ğŸ“¹ YouTube'
    type: select
    proxies:
      - 'â™»ï¸ è‡ªåŠ¨'
      - 'ğŸ”¯ æ•…éšœè½¬ç§»'
      - 'ğŸ‡°ğŸ‡· éŸ©å›½'
      - 'ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡'
      - 'ğŸ‡ºğŸ‡¸ ç¾å›½'
      - 'ğŸŒ å…¨éƒ¨èŠ‚ç‚¹'
  - name: 'ğŸ€ Google'
    type: select
    proxies:
      - 'â™»ï¸ è‡ªåŠ¨'
      - 'ğŸ”¯ æ•…éšœè½¬ç§»'
      - 'ğŸ‡°ğŸ‡· éŸ©å›½'
      - 'ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡'
      - 'ğŸ‡ºğŸ‡¸ ç¾å›½'
      - 'ğŸŒ å…¨éƒ¨èŠ‚ç‚¹'
  - name: 'ğŸ¤– ChatGPT'
    type: select
    proxies:
      - 'â™»ï¸ è‡ªåŠ¨'
      - 'ğŸ”¯ æ•…éšœè½¬ç§»'
      - 'ğŸ‡°ğŸ‡· éŸ©å›½'
      - 'ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡'
      - 'ğŸ‡ºğŸ‡¸ ç¾å›½'
      - 'ğŸŒ å…¨éƒ¨èŠ‚ç‚¹'
  - name: 'ğŸ“² Telegram'
    type: select
    proxies:
      - 'â™»ï¸ è‡ªåŠ¨'
      - 'ğŸ”¯ æ•…éšœè½¬ç§»'
      - 'ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡'
      - 'ğŸ‡°ğŸ‡· éŸ©å›½'
      - 'ğŸ‡ºğŸ‡¸ ç¾å›½'
      - 'ğŸŒ å…¨éƒ¨èŠ‚ç‚¹'

  - name: 'â™»ï¸ è‡ªåŠ¨'
    type: url-test
    url: 'https://www.gstatic.com/generate_204'
    interval: 300
    tolerance: 20 
    use:
      - Airport
  - name: 'ğŸ”¯ æ•…éšœè½¬ç§»'
    type: fallback
    url: 'https://www.gstatic.com/generate_204'
    interval: 300
    use:
      - Airport

  - name: 'ğŸ‡°ğŸ‡· éŸ©å›½'
    type: select
    use:
      - Airport
    filter: '(?i)éŸ©|Korea|KR|ğŸ‡°ğŸ‡·|ICN'
  - name: 'ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡'
    type: select
    use:
      - Airport
    filter: '(?i)æ–°|Singapore|SG|ğŸ‡¸ğŸ‡¬|SGW|SIN'
  - name: 'ğŸ‡ºğŸ‡¸ ç¾å›½'
    type: select
    use:
      - Airport
    filter: '(?i)ç¾|US|United States|ğŸ‡ºğŸ‡¸|ORD'
  - name: 'ğŸŒ å…¨éƒ¨èŠ‚ç‚¹'
    type: select
    use:
      - Airport

  - name: 'ğŸ¯ ç›´è¿'
    type: select
    proxies:
      - DIRECT
  - name: 'ğŸš« å¹¿å‘Šæ‹¦æˆª'
    type: select
    proxies:
      - REJECT
  - name: 'ğŸ AppleæœåŠ¡'
    type: select
    proxies:
      - DIRECT
      - 'ğŸš€ é»˜è®¤ä»£ç†'
  - name: 'ğŸŸ æ¼ç½‘ä¹‹é±¼'
    type: select
    proxies:
      - 'ğŸš€ é»˜è®¤ä»£ç†'
      - DIRECT

rules:
  - DOMAIN-SUFFIX,local,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,198.18.0.0/16,DIRECT 
  - RULE-SET,private_domain,DIRECT 

  - RULE-SET,ad_domain,REJECT

  - RULE-SET,netflix_domain,ğŸ¥ NETFLIX
  - RULE-SET,youtube_domain,ğŸ“¹ YouTube
  - RULE-SET,google_domain,ğŸ€ Google
  - RULE-SET,telegram_domain,ğŸ“² Telegram
  - RULE-SET,ai,ğŸ¤– ChatGPT
  - DOMAIN-KEYWORD,apple,ğŸ AppleæœåŠ¡
  - DOMAIN-KEYWORD,icloud,ğŸ AppleæœåŠ¡

  - RULE-SET,geolocation-!cn,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,cn_domain,ğŸ¯ ç›´è¿
  - RULE-SET,cn_ip,ğŸ¯ ç›´è¿

  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
